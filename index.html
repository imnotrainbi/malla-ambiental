<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Interactiva - Ing. Ambiental</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .estado-aprobado { background-color: #a7f3d0; }
    .estado-en-curso { background-color: #fef3c7; }
    .estado-pendiente { background-color: #fecaca; }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">
  <div class="container mx-auto p-6">
    <h1 class="text-3xl font-bold mb-4">Malla Interactiva - IngenierÃ­a Ambiental (UAC)</h1>
    <p class="mb-4">Haz clic en el estado del curso para cambiarlo. Los cursos se habilitan si cumples los prerrequisitos.</p>

    <table class="w-full border text-center">
      <thead>
        <tr class="bg-green-200">
          <th class="p-2">CÃ³digo</th>
          <th class="p-2">Curso</th>
          <th class="p-2">CrÃ©ditos</th>
          <th class="p-2">Prerrequisitos</th>
          <th class="p-2">Estado</th>
        </tr>
      </thead>
      <tbody id="tabla-cursos"></tbody>
    </table>
  </div>

  <script>
    const cursos = [
      { codigo: 'MAT012', nombre: 'PrecÃ¡lculo', creditos: 5, prereq: [], estado: 'âŒ' },
      { codigo: 'MAT004', nombre: 'CÃ¡lculo I', creditos: 4, prereq: ['MAT012'], estado: 'âŒ' },
      { codigo: 'MAT005', nombre: 'CÃ¡lculo II', creditos: 4, prereq: ['MAT004'], estado: 'âŒ' },
      { codigo: 'STD004', nombre: 'EstadÃ­stica I', creditos: 4, prereq: ['MAT012'], estado: 'âŒ' },
      { codigo: 'STD005', nombre: 'EstadÃ­stica II', creditos: 3, prereq: ['STD004'], estado: 'âŒ' },
      { codigo: 'AMB005', nombre: 'IntroducciÃ³n a la Ing. Ambiental', creditos: 3, prereq: [], estado: 'âŒ' },
      { codigo: 'QUI002', nombre: 'QuÃ­mica I', creditos: 3, prereq: ['AMB005'], estado: 'âŒ' },
      { codigo: 'QUI003', nombre: 'QuÃ­mica II', creditos: 4, prereq: ['QUI002'], estado: 'âŒ' },
      { codigo: 'BIO003', nombre: 'BiologÃ­a General', creditos: 4, prereq: [], estado: 'âŒ' },
      { codigo: 'BIO007', nombre: 'MicrobiologÃ­a Ambiental', creditos: 4, prereq: ['BIO003'], estado: 'âŒ' },
      { codigo: 'FIS001', nombre: 'FÃ­sica I', creditos: 3, prereq: [], estado: 'âŒ' },
      { codigo: 'FIS002', nombre: 'FÃ­sica II', creditos: 4, prereq: ['FIS001'], estado: 'âŒ' },
      { codigo: 'AMB045', nombre: 'EducaciÃ³n Ambiental', creditos: 3, prereq: [], estado: 'âŒ' },
      { codigo: 'AMB046', nombre: 'Sistemas de GestiÃ³n y PolÃ­ticas Ambientales', creditos: 4, prereq: [], estado: 'âŒ' },
      { codigo: 'AMB020', nombre: 'ContaminaciÃ³n del Agua', creditos: 4, prereq: [], estado: 'âŒ' },
      { codigo: 'AMB022', nombre: 'ContaminaciÃ³n del Aire y AcÃºstica', creditos: 4, prereq: ['AMB020'], estado: 'âŒ' },
      { codigo: 'AMB047', nombre: 'EvaluaciÃ³n del Impacto Ambiental', creditos: 4, prereq: ['AMB046'], estado: 'âŒ' },
      { codigo: 'AMB011', nombre: 'DiseÃ±o de Plantas y Sistemas Regenerativos', creditos: 4, prereq: ['AMB047'], estado: 'âŒ' },
      { codigo: 'AMB063', nombre: 'Operaciones y Procesos Unitarios II', creditos: 4, prereq: [], estado: 'âŒ' },
      { codigo: 'AMB009', nombre: 'Manejo y ConservaciÃ³n de Suelos', creditos: 3, prereq: [], estado: 'âŒ' }
    ];

    const estados = ['âŒ', 'ðŸŸ¡', 'âœ…'];

    function actualizarTabla() {
      const tbody = document.getElementById('tabla-cursos');
      tbody.innerHTML = '';

      cursos.forEach((curso, i) => {
        const habilitado = curso.prereq.every(cod => {
          const prereqCurso = cursos.find(c => c.codigo === cod);
          return prereqCurso?.estado === 'âœ…';
        });

        const row = document.createElement('tr');
        row.className =
          curso.estado === 'âœ…' ? 'estado-aprobado' :
          curso.estado === 'ðŸŸ¡' ? 'estado-en-curso' : 'estado-pendiente';

        row.innerHTML = `
          <td class="p-2 border">${curso.codigo}</td>
          <td class="p-2 border">${curso.nombre}</td>
          <td class="p-2 border">${curso.creditos}</td>
          <td class="p-2 border">${curso.prereq.join(', ') || 'â€”'}</td>
          <td class="p-2 border cursor-pointer font-bold" onclick="cambiarEstado(${i})">
            ${habilitado || curso.estado === 'âœ…' ? curso.estado : 'ðŸ”’'}
          </td>
        `;

        tbody.appendChild(row);
      });
    }

    function cambiarEstado(index) {
      const curso = cursos[index];
      const habilitado = curso.prereq.every(cod => {
        const prereqCurso = cursos.find(c => c.codigo === cod);
        return prereqCurso?.estado === 'âœ…';
      });
      if (!habilitado && curso.estado !== 'âœ…') return;
      const idx = estados.indexOf(curso.estado);
      curso.estado = estados[(idx + 1) % estados.length];
      actualizarTabla();
    }

    actualizarTabla();
  </script>
</body>
</html>
