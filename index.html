<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Curricular por Ciclo - Ing. Ambiental</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .estado-aprobado { background-color: #dcfce7; }
    .estado-pendiente { background-color: #fef2f2; }
    .estado-bloqueado { background-color: #e5e7eb; color: #9ca3af; cursor: not-allowed; }
  </style>
</head>
<body class="bg-gray-100 text-gray-900 p-6">
  <h1 class="text-4xl font-bold mb-6 text-center">Malla Curricular por Ciclo - Ing. Ambiental</h1>
  <div id="resumen-creditos" class="text-center text-lg font-semibold text-green-700 mb-6"></div>
  <div id="contenedor-ciclos" class="space-y-4"></div>

  <script>
    const cursos = [
      // CICLO I
      { ciclo: "I", codigo: "ANS006", nombre: "Antropolog칤a: Hombre, Cultura y Sociedad", creditos: 3, prereq: [] },
      { ciclo: "I", codigo: "AMB005", nombre: "Introducci칩n a la Ingenier칤a Ambiental", creditos: 3, prereq: [] },
      { ciclo: "I", codigo: "AMB055", nombre: "Medio Ambiente y Desarrollo Sostenible", creditos: 3, prereq: [] },
      { ciclo: "I", codigo: "EDU024", nombre: "M칠todos y T칠cnicas de Estudio Universitario", creditos: 3, prereq: [] },
      { ciclo: "I", codigo: "MAT012", nombre: "Prec치lculo", creditos: 5, prereq: [] },
      { ciclo: "I", codigo: "LLI004", nombre: "Comunicaci칩n Oral y Escrita", creditos: 4, prereq: [] },
      { ciclo: "I", codigo: "IDM006", nombre: "Taller de Lengua Nativa: Quechua", creditos: 1, prereq: [] },

      // CICLO II
      { ciclo: "II", codigo: "MAT004", nombre: "C치lculo I", creditos: 4, prereq: ["MAT012"] },
      { ciclo: "II", codigo: "AMB045", nombre: "Educaci칩n Ambiental para la Sostenibilidad", creditos: 3, prereq: ["AMB005"] },
      { ciclo: "II", codigo: "STD004", nombre: "Estad칤stica I", creditos: 4, prereq: ["MAT012"] },
      { ciclo: "II", codigo: "QUI002", nombre: "Qu칤mica I", creditos: 3, prereq: ["AMB005"] },
      { ciclo: "II", codigo: "ANS007", nombre: "Realidad Nacional y Globalizaci칩n", creditos: 3, prereq: ["ANS006"] },
      { ciclo: "II", codigo: "PSI003", nombre: "Desarrollo Personal", creditos: 3, prereq: [], creditosMinimos: 10 },
      { ciclo: "II", codigo: "SIS106", nombre: "TIC: Taller de Tecnolog칤as de la Informaci칩n", creditos: 2, prereq: [], creditosMinimos: 10 },

      // CICLO III
      { ciclo: "III", codigo: "MAT005", nombre: "C치lculo II", creditos: 4, prereq: ["MAT004"] },
      { ciclo: "III", codigo: "STD005", nombre: "Estad칤stica II", creditos: 3, prereq: ["STD004"] },
      { ciclo: "III", codigo: "QUI003", nombre: "Qu칤mica II", creditos: 4, prereq: ["QUI002"] },
      { ciclo: "III", codigo: "BIO003", nombre: "Biolog칤a General", creditos: 4, prereq: [], creditosMinimos: 30 },
      { ciclo: "III", codigo: "AMB013", nombre: "Climatolog칤a y Meteorolog칤a", creditos: 4, prereq: [], creditosMinimos: 30 },
      { ciclo: "III", codigo: "FIL005", nombre: "Pensamiento Filos칩fico y Ciudadan칤a", creditos: 3, prereq: [], creditosMinimos: 30 },

      // CICLO IV
      { ciclo: "IV", codigo: "AMB079", nombre: "T칩picos Avanzados para Ingenier칤a Ambiental", creditos: 4, prereq: ["MAT005"] },
      { ciclo: "IV", codigo: "BIO007", nombre: "Microbiolog칤a Ambiental", creditos: 4, prereq: ["BIO003"] },
      { ciclo: "IV", codigo: "FIS001", nombre: "F칤sica I", creditos: 3, prereq: [], creditosMinimos: 50 },
      { ciclo: "IV", codigo: "INV001", nombre: "Metodolog칤a de la Investigaci칩n", creditos: 4, prereq: ["STD005"] },
      { ciclo: "IV", codigo: "AMB056", nombre: "Procesos Ambientales", creditos: 4, prereq: ["QUI003"] },
      { ciclo: "IV", codigo: "CIV072", nombre: "Topograf칤a", creditos: 3, prereq: [], creditosMinimos: 50 },

      // CICLO V
      { ciclo: "V", codigo: "AMB007", nombre: "Contaminaci칩n de Suelos", creditos: 4, prereq: ["AMB056"] },
      { ciclo: "V", codigo: "FIS002", nombre: "F칤sica II", creditos: 4, prereq: ["FIS001"] },
      { ciclo: "V", codigo: "AMB062", nombre: "Operaciones y Procesos Unitarios I", creditos: 3, prereq: ["AMB056"] },
      { ciclo: "V", codigo: "AMB014", nombre: "Toxicolog칤a Ambiental", creditos: 4, prereq: ["BIO007"] },
      { ciclo: "V", codigo: "AMB006", nombre: "Mitigaci칩n y Adaptaci칩n al Cambio Clim치tico", creditos: 4, prereq: [], creditosMinimos: 70 },
      { ciclo: "V", codigo: "AMB064", nombre: "칄tica y Deontolog칤a Profesional en Ing. Ambiental", creditos: 3, prereq: [], creditosMinimos: 70 },

      // CICLO VI
      { ciclo: "VI", codigo: "AMB063", nombre: "Operaciones y Procesos Unitarios II", creditos: 4, prereq: ["AMB062"] },
      { ciclo: "VI", codigo: "AMB061", nombre: "Saneamiento Ambiental y Gesti칩n de Riesgos", creditos: 4, prereq: [], creditosMinimos: 90 },
      { ciclo: "VI", codigo: "AMB009", nombre: "Manejo y Conservaci칩n de Suelos", creditos: 3, prereq: ["AMB007"] },
      { ciclo: "VI", codigo: "SIS044", nombre: "Taller de Algor칤tmica y Programaci칩n", creditos: 3, prereq: [], creditosMinimos: 90 },
      { ciclo: "VI", codigo: "AMB046", nombre: "Sistemas de Gesti칩n y Pol칤ticas Ambientales", creditos: 4, prereq: [], creditosMinimos: 90 },
      { ciclo: "VI", codigo: "AMB020", nombre: "Contaminaci칩n del Agua", creditos: 4, prereq: ["AMB007"] },

      // CICLO VII
      { ciclo: "VII", codigo: "ARQ087", nombre: "Sistemas de Informaci칩n Geogr치fica", creditos: 3, prereq: ["AMB046"] },
      { ciclo: "VII", codigo: "AMB023", nombre: "Tecnolog칤a de Ingenier칤a Ambiental", creditos: 3, prereq: [], creditosMinimos: 110 },
      { ciclo: "VII", codigo: "AMB022", nombre: "Contaminaci칩n del Aire y Ac칰stica", creditos: 4, prereq: ["AMB020"] },
      { ciclo: "VII", codigo: "AMB056-RS", nombre: "Ingenier칤a y Gesti칩n de Residuos S칩lidos", creditos: 4, prereq: ["AMB009"] },
      { ciclo: "VII", codigo: "ECO056", nombre: "Ingenier칤a Econ칩mica", creditos: 3, prereq: ["AMB014"] },
      { ciclo: "VII", codigo: "ARQ047", nombre: "Expresi칩n Gr치fica", creditos: 2, prereq: [], creditosMinimos: 110 },
      { ciclo: "VII", codigo: "EEE I", nombre: "Electivo I", creditos: 3, prereq: [], creditosMinimos: 110 },

      // CICLO VIII
      { ciclo: "VIII", codigo: "AMB082", nombre: "Tecnolog칤as Limpias en los Procesos Industriales", creditos: 4, prereq: ["AMB023"] },
      { ciclo: "VIII", codigo: "AMB015", nombre: "Monitoreo Ambiental", creditos: 3, prereq: ["AMB022"] },
      { ciclo: "VIII", codigo: "AMB047", nombre: "Evaluaci칩n del Impacto Ambiental", creditos: 4, prereq: ["AMB046"] },
      { ciclo: "VIII", codigo: "AMB065", nombre: "Hidrolog칤a y Manejo de Cuencas", creditos: 4, prereq: ["ARQ087"] },
      { ciclo: "VIII", codigo: "AMB049", nombre: "Evaluaci칩n y Manejo de Riesgos Ambientales", creditos: 4, prereq: [], creditosMinimos: 130 },
      { ciclo: "VIII", codigo: "EEE II", nombre: "Electivo II", creditos: 3, prereq: [], creditosMinimos: 130 },

      // CICLO IX
      { ciclo: "IX", codigo: "AMB011", nombre: "Dise침o de Plantas y Sistemas Regenerativos", creditos: 4, prereq: ["AMB047"] },
      { ciclo: "IX", codigo: "AMB048", nombre: "Desarrollo Sostenible y Servicios Ambientales", creditos: 4, prereq: ["AMB049"] },
      { ciclo: "IX", codigo: "AMB025", nombre: "Modelaci칩n y Simulaci칩n de Sistemas Ambientales", creditos: 4, prereq: ["AMB082"] },
      { ciclo: "IX", codigo: "INV003", nombre: "Seminario Taller de Tesis I", creditos: 4, prereq: [], creditosMinimos: 150 },
      { ciclo: "IX", codigo: "ECO064", nombre: "Econom칤a Ambiental", creditos: 3, prereq: [], creditosMinimos: 150 },
      { ciclo: "IX", codigo: "EEE III", nombre: "Electivo III", creditos: 3, prereq: [], creditosMinimos: 150 },

      // CICLO X
      { ciclo: "X", codigo: "AMB026", nombre: "Formulaci칩n y Evaluaci칩n de Proyectos Ambientales", creditos: 4, prereq: ["INV003"] },
      { ciclo: "X", codigo: "AMB068", nombre: "Acondicionamiento y Ordenamiento Territorial", creditos: 3, prereq: ["AMB048"] },
      { ciclo: "X", codigo: "INV004", nombre: "Seminario Taller de Tesis II", creditos: 4, prereq: ["INV003"], creditosMinimos: 160 },
      { ciclo: "X", codigo: "AMB027", nombre: "Evaluaci칩n y Auditor칤a Ambiental", creditos: 4, prereq: ["AMB011"] },
      { ciclo: "X", codigo: "DER118", nombre: "Legislaci칩n Ambiental", creditos: 4, prereq: [], creditosMinimos: 170 },
      { ciclo: "X", codigo: "EEE IV", nombre: "Electivo IV", creditos: 3, prereq: [], creditosMinimos: 170 },
    ];

    const estados = {};
    const container = document.getElementById("contenedor-ciclos");

    function calcularCreditosAprobados() {
      return cursos.reduce((total, c) => estados[c.codigo] === "aprobado" ? total + c.creditos : total, 0);
    }

    function calcularEstado(curso) {
      if (curso.creditosMinimos && calcularCreditosAprobados() < curso.creditosMinimos) return "bloqueado";
      if (!curso.prereq.length) return "pendiente";
      const todosAprobados = curso.prereq.every(p => estados[p] === "aprobado");
      return todosAprobados ? "pendiente" : "bloqueado";
    }

    function agruparPorCiclo(cursos) {
      return cursos.reduce((acc, cur) => {
        acc[cur.ciclo] = acc[cur.ciclo] || [];
        acc[cur.ciclo].push(cur);
        return acc;
      }, {});
    }

function render() {
  container.innerHTML = "";
  document.getElementById("resumen-creditos").innerText =
    `Cr칠ditos aprobados: ${calcularCreditosAprobados()} / ${cursos.reduce((s, c) => s + c.creditos, 0)}`;

  const porCiclo = agruparPorCiclo(cursos);
  Object.entries(porCiclo).forEach(([ciclo, cursosCiclo]) => {
    const section = document.createElement("div");
    section.className = "bg-white rounded shadow-md p-4";
    section.innerHTML = `
      <h2 class="text-xl font-semibold mb-2">Ciclo ${ciclo}</h2>
      <div class="grid grid-cols-1 gap-2 md:grid-cols-2 lg:grid-cols-3" id="ciclo-${ciclo}"></div>
    `;

    const cicloDiv = section.querySelector(`#ciclo-${ciclo}`);
    cursosCiclo.forEach(curso => {
      // 游녤 recalculamos estado siempre
      const estado = calcularEstado(curso);
      estados[curso.codigo] = estados[curso.codigo] === "aprobado" ? "aprobado" : estado;

      const card = document.createElement("div");
      card.className = `p-3 border rounded shadow-sm transition ${
        estados[curso.codigo] === "aprobado" ? "estado-aprobado" :
        estados[curso.codigo] === "pendiente" ? "estado-pendiente" :
        "estado-bloqueado"
      }`;

      card.innerHTML = `
        <p class="font-bold">${curso.codigo}</p>
        <p>${curso.nombre}</p>
        <p class="text-sm text-gray-600">${curso.creditos} cr칠ditos</p>
      `;

      if (estados[curso.codigo] !== "bloqueado") {
        card.addEventListener("click", () => {
          estados[curso.codigo] = estados[curso.codigo] === "aprobado" ? "pendiente" : "aprobado";
          render(); // 游녤 actualiza todo el tablero
        });
      }

      cicloDiv.appendChild(card);
    });

    container.appendChild(section);
  });
}


    render();
  </script>
</body>
</html>
